{% extends 'course/course_base.html' %}

{% load static %}

{% block head %}
  <link rel="stylesheet" href="{% static 'course/css/course_base.css' %}"/>
  <link rel="stylesheet" href="{% static 'shared/css/appview_simple.css' %}"/>
  <link rel="stylesheet" href="{% static 'shared/css/popup_menu.css' %}"/>
  <script src="{% static 'shared/js/bcm.js' %}" defer></script>
  <script src="{% static 'shared/js/popupmenu.js' %}" defer></script>
  <script src="{% static 'course/js/custom_widgets/course_item_list_element.js' %}" defer></script>
{% endblock %}

{% block main_content %}

<h1>Course Materials</h1>

{% if is_instructor %}
  <div class="align-right">
    <button class='accent' onclick="window.location.href='{% url 'create_courseitem' pk=course.id%}'">
      <img class='icon' src="{% static 'shared/icons/add_white.svg' %}" alt="plus sign"/>
      Add Item
    </button>
  </div>

{% endif %}

{% if item_list %}
  <ul class="object-list">
    {% for item in item_list %}
      <li class="course-item">
        {% if item.content_type == 'U' %} {# for 'URL' #}
          <a class="object-icon" href="{{item.url_content}}">
            <img src="{% static 'shared/icons/link.svg' %}" alt="link icon"/>
          </a>
        {% else %}
          <a class="object-icon" href="{{item.get_absolute_url}}">
            <img src="{% static 'shared/icons/file.svg' %}" alt="file icon"/>
          </a>
        {% endif %}
        <div class="object-name">
          {% if item.content_type == 'U' %} {# for 'URL' #}
            <a href="{{item.url_content}}">{{ item.name }}</a>
          {% else %}
            <a href="{{item.get_absolute_url}}">{{ item.name }}</a>
          {% endif %}
        </div>
        <div class="object-details">
          {{ item.description }}
        </div>
        <span class="object-popup clickable">
          <img
            onclick="BCM.PopupMenu.do_popup(this, BCM.CourseItemListElement.menu)"
            data-course-id="{{course.id}}"
            data-edit-url="{% url 'edit_courseitem' pk=course.id item_id=item.id%}"
            src="{% static 'shared/icons/more_vert.svg' %}" alt="popup icon"/>
        </span>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>There are none.</p>
{% endif %}

{% endblock %}
